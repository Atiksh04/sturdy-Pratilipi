(this["webpackJsonppratilipi-front"]=this["webpackJsonppratilipi-front"]||[]).push([[0],{16:function(e,t,a){},174:function(e,t){},178:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(31),c=a.n(s),i=(a(87),a(88),a(4)),l=a(5),o=a(6),m=a(7),u=(a(16),a(75)),d=a.n(u),p=a(11),h=a(15),g=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).select=function(e){n.setState({selected:e});var t="/";"pen"===e?t="/write":"login"===e&&(t="/login"),n.props.history.push(t)},n.state={selected:n.props.selected},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"header pt-2"},r.a.createElement(h.b,{to:"/"},r.a.createElement("img",{src:d.a,alt:"logo",className:"image-logo"})),r.a.createElement("span",{className:"header-text pl-1"},"Okay"),r.a.createElement("input",{className:"search-group ",type:"text",placeholder:"Search for storys"}),r.a.createElement("span",{className:"icons-span",onClick:function(){return e.select("home")}},r.a.createElement(p.c,{className:"home"===this.state.selected?"icon-selected":"icons"})),r.a.createElement("span",{className:"icons-span",onClick:function(){return e.select("pen")}},r.a.createElement(p.d,{className:"pen"===this.state.selected?"icon-selected":"icons"})),r.a.createElement("span",{className:"icons-span",onClick:function(){return e.select("login")}},r.a.createElement(p.b,{className:"login"===this.state.selected?"icon-selected":"icons"})))}}]),a}(r.a.Component),f=(a(93),a(77)),v=a(12),E=a.n(v),y=a(20),b=a.n(y),N=(a(51),function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).clicked=function(e){n.props.history.push("/story/".concat(e))},n.state={res:[],loading:!1,error:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),E.a.get("/get-story-list").then((function(t){"error"!==t.data?e.setState({res:t.data.reverse(),loading:!1}):e.setState({loading:!1,error:!0})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"view-list"},this.state.loading?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(b.a,{type:"Oval",color:"#d00b12",height:35,width:35})):r.a.createElement("p",null),this.state.error?r.a.createElement("p",{className:"text-center text-danger"},"Seem's like some error"):r.a.createElement("div",{className:"card-display"},this.state.res.map((function(t){return r.a.createElement("div",{className:"card ",onClick:function(){return e.clicked(t._id)},key:t._id},r.a.createElement("img",{src:t.coverImage,alt:"coverImage",className:"cover-image"}),r.a.createElement("p",{className:"text-left text"},t.title))}))))}}]),a}(r.a.Component)),A=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).select=function(e){n.setState({selected:e});var t="/";"pen"===e?t="/write":"login"===e&&(t="/login"),n.props.history.push(t)},n.state={selected:n.props.selected},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"header-span row mt-2"},r.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 text-center"},r.a.createElement("span",{className:"icons-span",onClick:function(){return e.select("home")}},r.a.createElement(p.c,{className:"home"===this.state.selected?"icon-selected":"icons"}))),r.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 text-center"},r.a.createElement("span",{className:"icons-span",onClick:function(){return e.select("pen")}},r.a.createElement(p.d,{className:"pen"===this.state.selected?"icon-selected":"icons"}))),r.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 text-center"},r.a.createElement("span",{className:"icons-span",onClick:function(){return e.select("login")}},r.a.createElement(p.b,{className:"login"===this.state.selected?"icon-selected":"icons"}))))}}]),a}(r.a.Component),k=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).select=function(e){n.setState({selected:e})},n.state={selected:"home"},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement(g,{selected:"home",history:this.props.history}),r.a.createElement("div",{className:"mt-4"},r.a.createElement(f.Carousel,{showThumbs:!1,infiniteLoop:!0},r.a.createElement("div",null,r.a.createElement("img",{className:"car-image",src:"https://static-assets.pratilipi.com/init/banner?language=ENGLISH&name=en_0419_poems.jpg&quality=high&type=webp",alt:"banner1"})),r.a.createElement("div",null,r.a.createElement("img",{className:"car-image",src:"https://static-assets.pratilipi.com/init/banner?language=ENGLISH&name=en_0519_bythebay.jpg&quality=high&type=webp",alt:"banner-2"})),r.a.createElement("div",null,r.a.createElement("img",{className:"car-image",src:"https://static-assets.pratilipi.com/init/banner?language=ENGLISH&name=4_short_eng.jpg&quality=high&type=webp",alt:"banner-3"})))),r.a.createElement("div",{className:"view-list"},r.a.createElement(N,{history:this.props.history})),r.a.createElement(A,{selected:"home",history:this.props.history}))}}]),a}(r.a.Component),O=a(3);function j(e){return r.a.createElement(b.a,{type:"Oval",color:"white",height:e.height,width:e.width})}var S=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).email=function(e){n.setState({email:e.target.value})},n.pass=function(e){n.setState({pass:e.target.value})},n.regitser=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.pass};n.setState({regLoading:!0}),E.a.post("/register",t).then((function(e){"error"!==e.data?(localStorage.setItem("pratilipi_assignment_token",e.data.token),n.setState({redirect:!0,regLoading:!1})):n.setState({regLoading:!1,error:!0})}))},n.submit=function(e){e.preventDefault(),n.setState({sLoading:!0}),E.a.post("/login",{email:n.state.email,password:n.state.pass}).then((function(e){"error"===e.data||"No User Found"===e.data?(n.setState({sLoading:!1,error:!0}),console.log(e.data)):(localStorage.setItem("pratilipi_assignment_token",e.data.token),n.setState({redirect:!0,sLoading:!1}))}))},n.state={email:"",pass:"",regLoading:!1,sLoading:!1,redirect:!1,error:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log(localStorage.getItem("pratilipi_assignment_token")),null!==localStorage.getItem("pratilipi_assignment_token")&&this.setState({redirect:!0})}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(O.a,{to:"/write"}):r.a.createElement("div",{className:"login"},r.a.createElement("h4",{className:"left-border"},"Join"),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-6 col-lg-6"},r.a.createElement("form",{className:"form-group mb-4"},r.a.createElement("input",{type:"text",placeholder:"Enter your email",className:"form-control mb-3",onChange:this.email}),r.a.createElement("input",{tyoe:"password",placeholder:"Enter your password",className:"form-control mb-3",onChange:this.pass}),r.a.createElement("button",{className:"btn submit-button mr-1",onClick:this.regitser},this.state.regLoading?r.a.createElement(j,{height:20,width:20}):"Register"),r.a.createElement("button",{className:"btn submit-button",onClick:this.submit},this.state.sLoading?r.a.createElement(j,{height:20,width:20}):"Sign In")),this.state.error?r.a.createElement("p",{className:"text-danger"},"Oops there's some error "):r.a.createElement("p",null)),r.a.createElement("div",{className:"col-md-6 col-lg-6"},r.a.createElement("h4",{className:"left-border"},"Benefits Of Login"),r.a.createElement("p",{className:"text"},"Add stories and read anywhere, anytime."),r.a.createElement("p",{className:"text"},"Write and win prizes"),r.a.createElement("p",{className:"text"},"Connect with friends and read stories together"))))}}]),a}(r.a.Component),I=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,{selected:"login",history:this.props.history}),r.a.createElement(S,null),r.a.createElement(A,{selected:"login",history:this.props.history}))}}]),a}(r.a.Component),w=a(78),C=a.n(w),x=a(79),P=a.n(x),L=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e,t){n.setState({story:t.getData()})},n.submit=function(){n.setState({loading:!0}),E.a.post("/new-story",{title:n.state.title,data:n.state.story,coverImage:n.state.url},{headers:{authorization:localStorage.getItem("pratilipi_assignment_token")}}).then((function(e){"error"!==e.data?(n.setState({loading:!1,error:!1}),n.props.history.push("/story/".concat(e.data._id))):n.setState({loading:!1,error:!0})}))},n.title=function(e){n.setState({title:e.target.value})},n.url=function(e){n.setState({url:e.target.value})},n.state={story:"",loading:!1,title:"",url:"",error:!1,redirect:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"write"},r.a.createElement("h4",{className:"left-border mt-5"},"Add a Story"),r.a.createElement("div",{className:"row mt-3 form-group"},r.a.createElement("div",{className:"col-md-6 col sm-6 col-lg-6"},r.a.createElement("p",{className:"text"},"Story Title:"),r.a.createElement("input",{type:"text",placeholder:"Enter the Story Title",className:"form-control",onChange:this.title})),r.a.createElement("div",{className:"col-md-6 col sm-6 col-lg-6"},r.a.createElement("p",{className:"text"},"Cover Image Url:"),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Url for cover image",onChange:this.url}))),r.a.createElement("div",{className:"text-center"},r.a.createElement(C.a,{editor:P.a,data:"<p>Add your Story here!!</p>",onChange:function(t,a){e.onEditorStateChange(t,a)}}),r.a.createElement("button",{className:"btn submit-button mt-3",onClick:this.submit},this.state.loading?r.a.createElement(j,{height:20,width:20}):"Add Story"),this.state.error?r.a.createElement("p",{className:"text-danger text-center"},"Seems some error in saving the Story. Please try again"):r.a.createElement("p",null)))}}]),a}(r.a.Component),Q=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){null==localStorage.getItem("pratilipi_assignment_token")&&this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,{selected:"pen",history:this.props.history}),r.a.createElement(L,{history:this.props.history}),r.a.createElement(A,{selected:"pen",history:this.props.history}))}}]),a}(r.a.Component),R=a(81),z=a(80),J=a.n(z),U=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).location=window.location.href.split("/"),n.id=n.location[n.location.length-1],n.state={data:{},length:"",username:"",currentUser:"",error:!1},n.socket=J()("/"),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.post("/get-story",{id:this.id},{headers:{authorization:localStorage.getItem("pratilipi_assignment_token")}}).then((function(t){"error"!==t.data&&(e.setState({data:t.data,length:t.data.totalPeopleReadIds.length}),e.socket.emit("imin",e.id,localStorage.getItem("pratilipi_assignment_token")))})),this.socket.on("notification",(function(t){var a=t.filter((function(t){return t.id===e.id}));e.setState({currentUser:a.length})})),this.socket.on("errorOccured",(function(){e.setState({error:!0})})),window.addEventListener("beforeunload",(function(t){return e.socket.emit("exit",localStorage.getItem("pratilipi_assignment_token"),e.id),e.socket.disconnect(),t.preventDefault(),t.returnValue="Are you sure you want to close?"}))}},{key:"componentWillUnmount",value:function(){this.socket.emit("exit",localStorage.getItem("pratilipi_assignment_token"),this.id),this.socket.disconnect()}},{key:"render",value:function(){return r.a.createElement("div",{className:"story"},r.a.createElement("h3",{className:"text-center mt-4"},this.state.data.title),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-sm-6 col-lg-6"},r.a.createElement("a",{"data-toggle":"tooltip",title:"Total Read Count for the Story"},r.a.createElement(R.a,{className:"icons"}),": ",this.state.length," (total read count)")),r.a.createElement("div",{className:"col-md-6 col-sm-6 col-lg-6"},r.a.createElement("a",{"data-toggle":"tooltip",title:"Total User's Currently Viewing"}," ",r.a.createElement(p.a,{className:"icons"}),": ",this.state.currentUser," (Total User's currently viewing)"))),this.state.error?r.a.createElement("p",{className:"text-center text-danger"},"Seem's like some error. Please try again."):r.a.createElement("div",{className:"text-center text mt-3",dangerouslySetInnerHTML:{__html:this.state.data.data}}))}}]),a}(r.a.Component),M=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){null==localStorage.getItem("pratilipi_assignment_token")&&this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,{selected:"pen",history:this.props.history}),r.a.createElement(U,{history:this.props.history}))}}]),a}(r.a.Component);var H=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement(O.d,null,r.a.createElement(O.b,{path:"/login",component:I}),r.a.createElement(O.b,{path:"/write",component:Q}),r.a.createElement(O.b,{path:"/story/:id",component:M}),r.a.createElement(O.b,{path:"/",component:k}))))};a(177);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root"))},75:function(e,t){e.exports="data:image/png;base64,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"},82:function(e,t,a){e.exports=a(178)},87:function(e,t,a){},88:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.b5e9435b.chunk.js.map